
plugins {
	id 'java'
  	id 'io.spring.dependency-management' version '1.0.1.RELEASE'
}

project.ext.mainClassName = "com.troy.diplo.server.Main"
project.ext.assetsDir = new File("./");

repositories {
    jcenter()
}
 
dependencyManagement {
  imports {
    mavenBom 'org.apache.logging.log4j:log4j-bom:2.9.0'
  }
}

dependencies {
    
    compile project(':Troy Berry Core')
    compile project(':School')
    compile project(':Diplo Core')
    compile "io.netty:netty-all:4.1.6.Final"
  	compile "org.apache.logging.log4j:log4j-api"
  	compile "org.apache.logging.log4j:log4j-core"
}

task fatJar(type: Jar) {
	manifest {
    	attributes 'Main-Class': 'com.troy.diplo.server.Main'
    }
    baseName = project.name + '-all'
    from { configurations.compile.collect { it.isDirectory() ? it : zipTree(it) } }
    with jar
}

task run(dependsOn: classes, type: JavaExec) {
    main = project.mainClassName
    classpath = sourceSets.main.runtimeClasspath
    standardInput = System.in
    workingDir = project.assetsDir
    ignoreExitValue = false
	systemProperties['TBSeperateLog'] = 'false'
}

